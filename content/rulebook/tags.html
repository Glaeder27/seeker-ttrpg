<!DOCTYPE html>
<html lang="en" data-env="vsc-940">

<head>
    <meta charset="UTF-8">
    <title>Guard, Armor & Health â€“ Seeker Rulebook</title>
    <link rel="stylesheet" href="https://glaeder27.github.io/seeker-ttrpg/style/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Hit points, damage, and resilience rules for Seeker TTRPG.">

    <!--Custom CSS for the Health Chapter-->
    <style>
        #tag-glossary {
            padding: 1rem;
        }

        .tag-category {
            margin-bottom: 2rem;
        }

        .tag-category h2 {
            font-size: 1.5rem;
            border-bottom: 1px solid var(--border-color, #ccc);
            padding-bottom: 0.25rem;
        }

        .tag-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0.5rem;
        }

        .tag-table th,
        .tag-table td {
            padding: 0.5rem;
            border: 1px solid var(--border-color, #ccc);
            vertical-align: top;
        }
    </style>
</head>

<body>
    <div id="tag-glossary"></div>


    <script>
        async function loadTagGlossary() {
            try {
                const response = await fetch('https://glaeder27.github.io/seeker-ttrpg/data/tags.json'); // percorso al tuo file JSON
                const data = await response.json();

                const glossaryContainer = document.getElementById('tag-glossary');
                glossaryContainer.innerHTML = ''; // pulizia

                // Raggruppa per categoria
                const grouped = {};
                data.tags.forEach(tag => {
                    if (!tag.visibility) return; // ignora i tag nascosti
                    if (!grouped[tag.category]) grouped[tag.category] = [];
                    grouped[tag.category].push(tag);
                });

                // Per ogni categoria, crea una sezione
                for (const [category, tags] of Object.entries(grouped)) {
                    const section = document.createElement('section');
                    section.classList.add('tag-category');

                    const header = document.createElement('h2');
                    header.textContent = category;
                    section.appendChild(header);

                    const table = document.createElement('table');
                    table.classList.add('tag-table');

                    const thead = document.createElement('thead');
                    thead.innerHTML = `
        <tr>
          <th>Tag</th>
          <th>Definition</th>
          <th>Examples</th>
        </tr>`;
                    table.appendChild(thead);

                    const tbody = document.createElement('tbody');

                    tags.forEach(tag => {
                        const row = document.createElement('tr');

                        const nameCell = document.createElement('td');
                        nameCell.innerHTML = `<u>${tag.name}</u>`;
                        row.appendChild(nameCell);

                        const defCell = document.createElement('td');
                        defCell.textContent = tag.definition;
                        row.appendChild(defCell);

                        const exCell = document.createElement('td');
                        exCell.textContent = (tag.examples || []).join(', ');
                        row.appendChild(exCell);

                        tbody.appendChild(row);
                    });

                    table.appendChild(tbody);
                    section.appendChild(table);
                    glossaryContainer.appendChild(section);
                }
            } catch (error) {
                console.error('Failed to load tag glossary:', error);
                document.getElementById('tag-glossary').textContent =
                    'Error loading glossary.';
            }
        }

        // Esegui al caricamento della pagina
        document.addEventListener('DOMContentLoaded', loadTagGlossary);
    </script>
</body>

</html>