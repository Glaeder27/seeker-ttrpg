/* ==========================================================================
   1. IMPORTS & FONT DEFINITIONS
   ========================================================================== */

/* Google Fonts Import */
@import url("https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Cinzel:wght@400..900&family=Great+Vibes&family=IM+Fell+English+SC&family=IM+Fell+English:ital@0;1&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap");

/* Custom Font Definitions */
@font-face {
  font-family: Mistlock Rough;
  font-style: normal;
  font-weight: 400;
  src: url(/assets/fonts/Mistlock-Rough.ttf) format("truetype");
}

@font-face {
  font-family: Quentin;
  font-style: normal;
  font-weight: 400;
  src: url(/assets/fonts/Quentin.otf) format("opentype");
}

@font-face {
  font-family: High Summit;
  font-style: normal;
  font-weight: 400;
  src: url(/assets/fonts/High-Summit.otf) format("opentype");
}

@font-face {
  font-family: Honey Script;
  font-style: normal;
  font-weight: 400;
  src: url(/assets/fonts/HoneyScript-Light.ttf) format("truetype");
}

@font-face {
  font-family: "1651 Alchemy Symbols";
  font-style: normal;
  font-weight: 400;
  src: url(/assets/fonts/1651-Alchemy-Symbols.ttf) format("truetype");
}

@font-face {
  font-family: "1540 Mercator Script";
  font-style: normal;
  font-weight: 400;
  src: url(/assets/fonts/1540-Mercator-Script.ttf) format("truetype");
}


/* ==========================================================================
   2. ROOT VARIABLES (CUSTOM PROPERTIES)
   ========================================================================== */

:root {
  /* -- Color Palette -- */
  --bright-gold: #f6cb75;
  --ancient-gold: #d4b55a;
  --pale-copper: #c99c5e;
  --burnt-copper: #a07c44;
  --pale-beige: #c6bca9;
  --deep-charcoal: #161718;
  --brown-charcoal: #3d2e23;
  --accent: #8255b6;
  --rust-red: #8a3c30;
  --faded-jade: #7e9e85;
  --warm-stone: #6b6b61;
  --off-white: #f0f0f0;
  --text-muted: #bbb;
  --light-brown: #916339;
  --light-paper: #938663;
  --dark-paper: #373531;
  --background-site: #1e1e1e;
  --background-dark-1: #1e1e1e;
  --background-dark-2: #292929;
  --background-dark-3: #3b3b3b;
  --hover-light-1: hsla(0, 0%, 100%, .1);

  /* -- Stance Colors -- */
  --stance-aggressive: #8b3a3a;
  --stance-defensive: #4a5e6a;
  --stance-evasive: #667054;
  --stance-inquisitive: #b89b4b;
  --stance-balanced: #5e7a78;
  --stance-mystic: #735a84;

  /* -- Color Palette (RGB Versions) -- */
  --bright-gold-rgb: 246, 203, 117;
  --ancient-gold-rgb: 212, 181, 90;
  --pale-copper-rgb: 201, 156, 94;
  --pale-beige-rgb: 198, 188, 169;
  --burnt-copper-rgb: 160, 124, 68;
  --deep-charcoal-rgb: 22, 23, 24;
  --brown-charcoal-rgb: 61, 46, 35;
  --rust-red-rgb: 138, 60, 48;
  --faded-jade-rgb: 126, 158, 133;
  --warm-stone-rgb: 107, 107, 97;
  --off-white-rgb: 240, 240, 240;
  --dark-paper-rgb: 147, 134, 99;
  --background-site-rgb: 30, 30, 30;
  --background-dark-1-rgb: 30, 30, 30;
  --background-dark-2-rgb: 41, 41, 41;
  --background-dark-3-rgb: 59, 59, 59;

  /* -- Typography -- */
  --font-default: "Arial";
  --font-main: "Montserrat", sans-serif;
  --font-special: "Georgia", serif;
  --font-handwritten: "Great Vibes", cursive;
  --font-calligraphy: "Quentin", cursive;
  --font-calligraphy-2: "High Summit", cursive;
  --font-calligraphy-3: "Honey Script", cursive;
  --font-antique: "IM Fell English", serif;
  --font-arcane: "Mistlock Rough", serif;
  --font-alchemy-symbols: "1651 Alchemy Symbols", serif;
  --font-logo: "1540 Mercator Script", serif;
  --font-title: "1540 Mercator Script", serif;

  /* -- Cursors -- */
  --cursor-default: url(/assets/cursor/cursor-default.svg) 5 2, auto;
  --cursor-pointer: url(/assets/cursor/cursor-pointer.svg) 9 4, pointer;
  --cursor-text: url(/assets/cursor/cursor-text.svg) 12 14, text;
  --cursor-wait: wait;
  --cursor-not-allowed: url(/assets/cursor/cursor-not-allowed.svg) 4 1, not-allowed;
  --cursor-progress: url(/assets/cursor/cursor-loading.svg) 12 12, progress;
  --cursor-help: url(/assets/cursor/cursor-help.svg) 4 1, help;
  --cursor-grab: url(/assets/cursor/cursor-grab.svg) 12 12, grab;
  --cursor-grabbing: url(/assets/cursor/cursor-grabbing.svg) 12 12, grabbing;
  --cursor-move: move;
  --cursor-resize-h: ew-resize;
  --cursor-resize-v: ns-resize;
  --cursor-resize-ne: ne-resize;
  --cursor-resize-nw: nw-resize;
  --cursor-resize-se: se-resize;
  --cursor-resize-sw: sw-resize;

  /* -- Asset Icons -- */
  --dice-action: url(/assets/icons/svg/dice/dice-action.svg);
  --dice-risk: url(/assets/icons/svg/dice/dice-risk.svg);
  --dice-combined: url(/assets/icons/svg/dice/dice-combined.svg);
  --dice-action-1: url(/assets/icons/svg/dice/dice-green-1.svg);
  --dice-action-2: url(/assets/icons/svg/dice/dice-green-2.svg);
  --dice-action-3: url(/assets/icons/svg/dice/dice-green-3.svg);
  --dice-action-4: url(/assets/icons/svg/dice/dice-green-4.svg);
  --dice-action-5: url(/assets/icons/svg/dice/dice-green-5.svg);
  --dice-action-6: url(/assets/icons/svg/dice/dice-green-6.svg);
  --dice-risk-1: url(/assets/icons/svg/dice/dice-red-1.svg);
  --dice-risk-2: url(/assets/icons/svg/dice/dice-red-2.svg);
  --dice-risk-3: url(/assets/icons/svg/dice/dice-red-3.svg);
  --dice-risk-4: url(/assets/icons/svg/dice/dice-red-4.svg);
  --dice-risk-5: url(/assets/icons/svg/dice/dice-red-5.svg);
  --dice-risk-6: url(/assets/icons/svg/dice/dice-red-6.svg);

  /* -- Textures -- */
  --texture-leather: url(/assets/textures/leather-1.png);
  --texture-concrete: url(/assets/textures/concrete-1.png);
}


/* ==========================================================================
   3. GLOBAL STYLES & RESETS
   ========================================================================== */

/* Box Sizing Reset */
*,
:after,
:before {
  box-sizing: border-box;
}

/* Base HTML & Body Styles */
html,
body {
  background-color: var(--background-site, #1e1e1e);
  color: var(--off-white);
  font-family: var(--font-default);
  height: auto;
  margin: 0;
  padding: 0;
  opacity: 1;
  transition: opacity 0.5s ease-in-out;
  scrollbar-width: none;
  /* For Firefox */
  cursor: var(--cursor-default);
}

body {
  position: relative;
  z-index: 0;
  scroll-behavior: smooth;
}

/* Hide scrollbar for Chrome, Safari and Opera */
body::-webkit-scrollbar {
  display: none;
}

/* Default Background Texture */
body:before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  background-image: url(/assets/textures/background-page-1.webp);
  background-position: 0 0;
  background-repeat: repeat;
  background-size: auto;
  opacity: .03;
  z-index: -1;
  pointer-events: none;
}

/* Background Variations */
body.bckg-2:before {
  background-image: url(/assets/textures/background-page-2.webp);
  opacity: .01;
}

body.clean:before {
  content: none;
}

/* Preload transition */
html.preload body {
  opacity: 0;
  transition: opacity .5s ease;
}

html:not(.preload) body {
  opacity: 1;
  transition: opacity .5s ease;
}

/* Mobile viewport fix */
@media (max-width: 767px) {

  html,
  body {
    height: 100dvh;
    overflow-x: hidden;
  }
}

/* --- Typography --- */

h1,
h2,
h3,
p {
  cursor: var(--cursor-text);
}

h1 {
  padding: 10px 10px 8px 12px;
}

h1.site-title {
  background: linear-gradient(to right, rgba(var(--deep-charcoal-rgb), .2), rgba(var(--brown-charcoal-rgb), .2)), url(/assets/textures/antique-gold-1.jpg);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  font-family: var(--font-logo);
  font-size: 12vw;
  font-weight: 400;
  line-height: 1;
  margin: -.3em 0 0;
  padding-bottom: .3em;
  padding-top: .1em;
  filter: drop-shadow(2px 4px 6px black);
  pointer-events: none;
  user-select: none;
}

h2 {
  background: linear-gradient(to bottom, rgba(var(--deep-charcoal-rgb), .2), rgba(var(--brown-charcoal-rgb), .2)), url(/assets/textures/antique-gold-1.jpg);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: var(--ancient-gold, #d6b879);
  font-family: var(--font-antique);
  font-size: clamp(3rem, 6.5vw, 4rem);
  font-weight: 500;
  line-height: 1.2;
  margin: 1rem auto;
  letter-spacing: normal;
  filter: drop-shadow(0 4px 10px black);
}

h3 {
  color: var(--off-white);
  font-family: var(--font-main);
  font-size: 28px;
  font-weight: 500;
  margin-top: 30px;
  margin-bottom: 15px;
  padding-bottom: 5px;
  position: relative;
}

h3:after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  height: 1px;
  width: 100%;
  background: url(/assets/textures/antique-gold-1.jpg);
  background-repeat: no-repeat;
  background-size: cover;
  border-radius: 5px;
  pointer-events: none;
  -webkit-mask-image: linear-gradient(to right, rgba(var(--deep-charcoal-rgb), 1) 0, rgba(var(--deep-charcoal-rgb), 1) 20%, rgba(var(--deep-charcoal-rgb), .8) 40%, rgba(var(--deep-charcoal-rgb), .8) 60%, rgba(var(--deep-charcoal-rgb), .4) 80%, rgba(var(--deep-charcoal-rgb), .2) 90%, rgba(var(--deep-charcoal-rgb), 0) 100%);
  mask-image: linear-gradient(to right, rgba(var(--deep-charcoal-rgb), 1) 0, rgba(var(--deep-charcoal-rgb), 1) 20%, rgba(var(--deep-charcoal-rgb), .8) 40%, rgba(var(--deep-charcoal-rgb), .8) 60%, rgba(var(--deep-charcoal-rgb), .4) 80%, rgba(var(--deep-charcoal-rgb), .2) 90%, rgba(var(--deep-charcoal-rgb), 0) 100%);
  -webkit-mask-size: cover;
  mask-size: cover;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
}

h3.centered:after,
h3.rules-title:after,
.flip-front h3:after,
.flip-back h3:after {
  -webkit-mask-image: linear-gradient(to right, rgba(var(--deep-charcoal-rgb), 0) 0, rgba(var(--deep-charcoal-rgb), .5) 20%, rgba(var(--deep-charcoal-rgb), 1) 40%, rgba(var(--deep-charcoal-rgb), 1) 60%, rgba(var(--deep-charcoal-rgb), .5) 80%, rgba(var(--deep-charcoal-rgb), 0) 100%);
  mask-image: linear-gradient(to right, rgba(var(--deep-charcoal-rgb), 0) 0, rgba(var(--deep-charcoal-rgb), .5) 20%, rgba(var(--deep-charcoal-rgb), 1) 40%, rgba(var(--deep-charcoal-rgb), 1) 60%, rgba(var(--deep-charcoal-rgb), .5) 80%, rgba(var(--deep-charcoal-rgb), 0) 100%);
  text-align: center;
}

h3.centered.no-underline:after {
  content: none;
}

.rules-card.unavailable h3:after {
  filter: grayscale(1);
}

h3.tagged {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: nowrap;
}

h4 {
  color: var(--ancient-gold);
  font-family: var(--font-main);
  font-size: 22px;
  font-weight: 500;
  margin-top: 20px;
  margin-bottom: 10px;
  padding-bottom: 2px;
}

p {
  color: var(--off-white);
  font-family: var(--font-main);
  font-size: .9rem;
  font-weight: 400;
  line-height: 1.7;
}

a:link {
  color: var(--ancient-gold);
  font-weight: 400;
}

a:visited {
  color: var(--burnt-copper);
}

a:hover {
  color: var(--bright-gold);
}

a:active {
  color: var(--pale-copper);
}

b,
strong {
  color: var(--off-white);
  font-weight: 700;
}

ul,
ol {
  margin-top: 0;
  padding-left: 25px;
}

ul {
  list-style-type: disc;
  margin-bottom: 0;
  margin-left: 20px;
  padding-left: 0;
}

li {
  color: var(--off-white);
  font-family: var(--font-main);
  font-size: .9rem;
  font-weight: 400;
  line-height: 1.8;
  margin-bottom: 8px;
  position: relative;
}

ul.diamond li {
  list-style: none;
  padding-left: .3em;
  text-indent: 0;
}

ul.diamond li::marker {
  font-family: var(--font-main);
  color: var(--ancient-gold);
  content: "✦ ";
}


/* --- Cursors --- */
.button,
a,
button {
  cursor: var(--cursor-pointer);
}

input[type=text],
textarea {
  cursor: var(--cursor-text);
}

.disabled,
[disabled] {
  cursor: var(--not-allowed);
}


/* --- Responsive Typography --- */
@media (max-width: 768px) {
  h1.site-title {
    font-size: clamp(5rem, 7rem, 9rem);
  }

  h2 {
    font-size: clamp(2.5rem, 3rem, 4rem);
    letter-spacing: normal;
    margin: auto;
    padding: 8px 10px;
  }

  h3,
  h4 {
    font-size: clamp(1.5rem, 2rem, 3rem);
  }
}

@media (max-width: 390px) {
  h2.section {
    font-size: 1.5rem;
    margin-inline: -30px;
  }
}


/* ==========================================================================
   4. LAYOUT & GRID SYSTEM
   ========================================================================== */

.page {
  flex: 1;
  width: 100%;
}

.page,
.page>div {
  min-width: 0;
}

.page-infobox {
  margin: 0 auto;
  padding: 25px 10px 0;
}

/* --- Columns --- */
.central-column {
  max-width: 800px;
}

.full-width {
  width: 100%;
}

.central-column,
.full-width {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin-left: auto;
  margin-right: auto;
  padding: 0 2rem;
}

.dual-column {
  display: grid;
  grid-template-columns: minmax(0, 200px) minmax(200px, 1000px) 400px;
  justify-content: center;
  gap: 10px;
  width: 100%;
  margin: 0 auto;
  padding: 5rem 0;
}

.left-column {
  grid-column: 2;
  width: 100%;
}

.right-column {
  grid-column: 3;
  align-self: start;
  position: sticky;
  top: 5rem;
  right: 2rem;
  height: calc(100vh - 5rem);
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--ancient-gold, #d4b55a) transparent;
}

main.dual-column[type=lorebook] .right-column,
main.dual-column[type=rulebook] .right-column {
  position: sticky;
}

main.dual-column[type=lorebook] .right-column .sidebar-wrapper {
  max-width: 400px;
}

/* --- Section Layouts --- */
.section-wrapper {
  position: relative;
  max-width: 800px;
  margin: 60px auto 30px;
  padding: 0 2rem 2rem;
  background-color: rgba(var(--background-dark-2-rgb, 41, 41, 41), .3);
  border-left: 2px solid rgba(var(--pale-beige-rgb), .1);
  border-right: 2px solid rgba(var(--pale-beige-rgb), .1);
  border-radius: 0 0 1rem 1rem;
  filter: drop-shadow(0 0 5px black);
}

.section-wrapper[id^=section] {
  margin-top: 6rem;
}

.section-wrapper[id=section1] {
  margin-top: 4rem;
}

.section-columns {
  display: flex;
  flex-wrap: wrap;
  gap: 2rem;
}

.section-col {
  flex: 1 1 300px;
  min-width: 280px;
  padding: 0 1rem;
  margin: 1rem 0;
  background: var(--background-dark-2);
  border-radius: 1rem;
}

/* --- Responsive Layout --- */
@media (max-width: 900px) {
  .dual-column {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    max-width: 800px;
    padding: 2rem 1rem 0;
    margin-left: auto;
    margin-right: auto;
    position: relative;
  }

  .left-column,
  .right-column {
    grid-column: auto;
    position: static;
    top: auto;
    height: auto;
    width: 100%;
    max-width: 100%;
    overflow: visible;
    margin: 0;
    padding: 0;
  }
}

@media (max-width: 768px) {
  .section-wrapper {
    padding: 0 1rem 1rem;
  }
}

/* Right Column Scrollbar Styling */
.right-column::-webkit-scrollbar {
  width: 8px;
}

.right-column::-webkit-scrollbar-track {
  background: #eee;
  border-radius: 4px;
}

.right-column::-webkit-scrollbar-thumb {
  background-color: #888;
  border-radius: 4px;
  border: 2px solid #eee;
}

.right-column::-webkit-scrollbar-thumb:hover {
  background-color: #555;
}


/* ==========================================================================
   5. UTILITY & HELPER CLASSES
   ========================================================================== */
.uppercase {
  text-transform: uppercase;
}

.align-left {
  text-align: left !important;
}

.align-center {
  text-align: center !important;
}

.shadowed {
  filter: drop-shadow(2px 4px 6px rgba(0, 0, 0, .5));
}

.highlight {
  color: var(--ancient-gold, #d4b55a);
}

.opacity-1 {
  opacity: 1;
}

/* Spacers */
.spacer.small {
  margin: 1rem 0;
}

.spacer.small-medium {
  margin: 2rem 0;
}

.spacer.medium {
  margin: 3rem 0;
}

.spacer.large {
  margin: 5rem 0;
}

/* Anchor scroll margin */
[id^=section] {
  scroll-margin-top: 80px;
}

[id=section1] {
  scroll-margin-top: 999px;
}

/* No-bullet list */
.no-bullet {
  list-style: none;
  margin-left: 0;
  padding-left: 0;
}

.no-bullet>li {
  list-style: none;
}

.no-bullet>li:before {
  content: none;
}


/* ==========================================================================
   6. COMPONENTS
   ========================================================================== */

/* --- Navbar --- */
.main-navbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 60px;
  padding: .1rem 20vh 0 10%;
  background-color: var(--background-dark-1, #1e1e1e);
  border: solid transparent;
  border-width: 0 0 1px;
  border-image: url(/assets/textures/ancient-gold-3-h.jpg) 1 round;
  font-family: var(--font-main, sans-serif);
  z-index: 9;
  opacity: 1 !important;
}

body#home-page .main-navbar {
  border-bottom: none;
}

.navbar-logo {
  padding: 1rem;
}

.navbar-logo img {
  vertical-align: middle;
}

.navbar-links {
  display: flex;
  list-style: none;
  margin: 0;
  padding: 0;
  gap: .2rem;
}

.navbar-links li {
  margin-bottom: 0;
}

.navbar-links a {
  display: block;
  padding: 1rem;
  color: #fff;
  text-decoration: none;
  text-transform: uppercase;
  font-size: .8em;
  background: transparent;
  transition: all .2s ease;
}

.navbar-links a:hover {
  background-color: var(--hover-light-1);
  color: var(--accent-color, var(--bright-gold, #f6cb75));
}

.nav-link.active {
  color: var(--ancient-gold, #d4b55a);
  background-color: rgba(255, 215, 0, .05);
  font-weight: 700;
}

/* Mobile Navbar */
.navbar-toggle {
  display: none;
  /* Hidden on desktop */
  background: none;
  border: none;
  color: #fff;
  font-size: 1.8rem;
  cursor: var(--cursor-pointer);
}

.navbar-links-mobile {
  display: none;
  /* Hidden on desktop */
}

@media (max-width: 768px) {
  .main-navbar {
    display: none;
  }

  .navbar-toggle {
    display: block;
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 60px;
    height: 55px;
    background: linear-gradient(to right, rgba(var(--burnt-copper-rgb), .3), rgba(var(--ancient-gold-rgb), .5));
    border: 2px solid var(--background-dark-3);
    border-radius: .6rem;
    color: var(--ancient-gold);
    font-size: 2.5rem;
    line-height: 1;
    backdrop-filter: blur(4px);
    z-index: 8;
  }

  .navbar-links-mobile {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    position: fixed;
    inset: 0;
    padding: 3rem;
    background: rgba(30, 30, 30, .9);
    backdrop-filter: blur(0);
    overflow: hidden;
    z-index: 10;
    opacity: 0;
    pointer-events: none;
    transition: opacity .4s ease, backdrop-filter .4s ease;
  }

  .navbar-links-mobile.show {
    opacity: 1;
    pointer-events: auto;
    backdrop-filter: blur(8px);
    animation: slideIn .4s forwards;
  }

  .navbar-links-mobile:before {
    content: "";
    position: absolute;
    inset: 0;
    margin-top: 5rem;
    background: url(/assets/icons/webp/alchemy-symbols/alchemy-symbol-var-5.webp) no-repeat 50%/100%;
    opacity: 0;
    transform: rotate(0deg) scale(1);
    transition: opacity .4s ease, transform .4s ease;
    pointer-events: none;
  }

  .navbar-links-mobile.show:before {
    opacity: .05;
    transform: rotate(30deg) scale(1.5);
  }

  .navbar-links-mobile ul {
    list-style: none;
    margin: 0;
    padding: 0;
    width: 100%;
    text-align: left;
  }

  .navbar-links-mobile li {
    line-height: 1;
    margin: 1.5rem 0;
    padding: .3rem 0;
    border-bottom: 1px solid var(--background-dark-3);
    transform: translateY(0);
    opacity: 0;
    animation: none;
    animation-delay: 0s;
  }

  .navbar-links-mobile.show li:first-child {
    animation-delay: .3s;
  }

  .navbar-links-mobile.show li:nth-child(2) {
    animation-delay: .4s;
  }

  .navbar-links-mobile.show li:nth-child(3) {
    animation-delay: .5s;
  }

  .navbar-links-mobile.show li:nth-child(4) {
    animation-delay: .6s;
  }

  .navbar-links-mobile.show li:nth-child(5) {
    animation-delay: .7s;
  }

  .navbar-links-mobile.show li:nth-child(6) {
    animation-delay: .8s;
  }

  .navbar-links-mobile.show li:nth-child(7) {
    animation-delay: .9s;
  }

  .navbar-links-mobile.show li:nth-child(8) {
    animation-delay: 1s;
  }

  .navbar-links-mobile.show li:nth-child(9) {
    animation-delay: 1.1s;
  }

  .navbar-links-mobile a {
    text-decoration: none;
    text-transform: uppercase;
    color: var(--ancient-gold, #d4b55a);
    font-size: 1.3rem;
    font-weight: 500;
    letter-spacing: 1px;
    transition: color .3s, transform .2s;
  }

  .navbar-links-mobile a:hover {
    color: var(--bright-gold, #f6cb75);
    transform: scale(1.05);
  }

  .navbar-close {
    position: absolute;
    right: 2rem;
    bottom: 1rem;
    background: none;
    border: none;
    color: var(--rust-red, #aa3b3b);
    font-size: 4.5rem;
    cursor: var(--cursor-pointer);
    transition: color .3s, transform .2s;
    z-index: 10;
  }

  .navbar-close:hover {
    color: #f55;
    transform: rotate(90deg);
  }
}

/* --- User Menu --- */
.user-menu-container {
  position: relative;
}

.user-icon {
  font-size: 1.5rem;
  color: var(--text-color);
}

i.fa-solid.fa-right-from-bracket {
  color: var(--ancient-gold);
  font-size: 26px;
  transition: all .6s ease-in-out;
}

.user-dropdown {
  display: none;
  position: absolute;
  top: 100%;
  right: 0;
  min-width: 150px;
  background-color: var(--background-dark-1);
  border: 1px solid var(--ancient-gold);
  box-shadow: 0 4px 8px rgba(0, 0, 0, .2);
  z-index: 1000;
}

.user-dropdown.show {
  display: block;
}

.dropdown-item {
  display: block;
  padding: 10px;
  color: var(--text-color-light);
  text-decoration: none;
  transition: background-color .2s;
}

.dropdown-item:hover {
  background-color: var(--hover-color);
}

@media (max-width: 768px) {
  i.fa-solid.fa-right-from-bracket {
    font-size: 30px;
  }
}

/* --- Side Navigation (Sidenav) --- */
.sidenav-wrapper {
  position: relative;
}

.sidenav {
  position: fixed;
  top: 50%;
  left: 0;
  transform: translateX(0) translateY(-50%);
  width: 400px;
  height: 70vh;
  background: linear-gradient(#1f1f1f, #1f1f1f) padding-box, linear-gradient(0deg, transparent calc(100% - 5px), #000 100%, #000) border-box, url(/assets/textures/antique-gold-1.jpg) border-box;
  background-repeat: no-repeat;
  background-size: 100% 100%, 100% 100%, cover;
  border-left: none;
  border-right: 4px solid transparent;
  border-radius: 0 1rem 1rem 0;
  padding: 1.5rem 1rem 1.5rem .3rem;
  overflow: hidden;
  backdrop-filter: blur(4px);
  filter: drop-shadow(0 0 10px rgba(0, 0, 0, .5));
  transition: transform .6s ease;
  z-index: 1000;
}

.sidenav.no-transition {
  transition: none;
}

.sidenav.collapsed {
  transform: translateX(-95%) translateY(-50%);
  padding-right: 2rem;
}

.sidenav-scroll {
  height: 100%;
  overflow-y: auto;
  padding: 0 2rem;
  direction: rtl;
  /* For scrollbar on the left */
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--ancient-gold-rgb), .2) transparent;
}

.sidenav-scroll>* {
  direction: ltr;
  /* Reset text direction */
}

.sidenav-scroll::-webkit-scrollbar {
  width: 4px;
}

.sidenav-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.sidenav-scroll::-webkit-scrollbar-thumb {
  background-color: var(--ancient-gold, #d4b55a);
  border-radius: 10px;
}

.sidenav-content h3 {
  font-size: 1.1em;
  color: #ddd;
  border-bottom: 1px solid #555;
  padding-bottom: .3rem;
}

.sidenav-content ul {
  list-style: none;
  padding: 0;
  margin: .5rem 0;
}

.sidenav-content li {
  margin: .4rem 0;
}

.sidenav-content a {
  display: block;
  padding: .5rem;
  color: #aaa;
  text-decoration: none;
  transition: color .2s;
}

.sidenav-content a:hover {
  color: #fff;
}

.sidenav-content a.active {
  color: #fff;
  line-height: 2;
  padding-left: .5rem;
  border-left: 3px solid #fff;
}

#sidenav-content a.active {
  color: var(--ancient-gold);
}

#chapter-sections a.active {
  background-color: hsla(0, 0%, 100%, .05);
  border-left: 3px solid var(--ancient-gold, #d4b55a);
  font-weight: 700;
  padding-left: 1rem;
}

#chapter-sections li.subsection a {
  display: block;
  font-size: .9em;
  margin-top: .25em;
  padding-left: 1.5em;
}

#chapter-sections li.subsection a.active {
  background-color: hsla(0, 0%, 100%, .05);
  border-left: 1px solid var(--ancient-gold, #d4b55a);
  font-weight: 700;
  padding-left: 1rem;
}

.sidenav-toggle-btn {
  position: fixed;
  top: 25%;
  left: 5px;
  transform: translate(0);
  width: 3rem;
  height: 3rem;
  background: linear-gradient(to bottom, rgba(var(--deep-charcoal-rgb), .2), rgba(var(--brown-charcoal-rgb), .2)), url(/assets/textures/antique-gold-1.jpg);
  border: 2px solid var(--ancient-gold);
  border-radius: 10px;
  padding: 3px;
  color: #fff;
  font-size: 1.2em;
  line-height: 1;
  z-index: 1001;
}

.sidenav:not(.collapsed)+.sidenav-toggle-btn {
  left: 10px;
}

.toggle-btn-container {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background: var(--background-dark-1);
  border-radius: 8px;
}

.sidenav-toggle-btn:hover .toggle-btn-icon {
  color: var(--bright-gold);
  transition: color .1s ease;
}

@media (max-width: 768px) {
  .sidenav.collapsed {
    transform: translateX(-100%) translateY(-50%);
  }

  .sidenav-toggle-btn {
    display: block;
    position: fixed;
    top: unset;
    bottom: 2rem;
    left: 2rem;
    width: 60px;
    height: 55px;
    background: linear-gradient(to right, rgba(var(--burnt-copper-rgb), .3), rgba(var(--ancient-gold-rgb), .5));
    border: 2px solid var(--background-dark-3);
    border-radius: .6rem;
    color: var(--ancient-gold);
    font-size: 2.5rem;
    line-height: 1;
    backdrop-filter: blur(4px);
    box-shadow: 0 0 10px hsla(40, 88%, 71%, .4);
    transform: none !important;
    z-index: 8;
  }

  .sidenav-toggle-btn:hover {
    background: linear-gradient(to left, rgba(var(--burnt-copper-rgb), .3), rgba(var(--ancient-gold-rgb), .5));
    font-size: 30px;
  }

  .sidenav:not(.collapsed)+.sidenav-toggle-btn {
    left: 2rem;
  }
}

/* --- Footer --- */
.site-footer {
  padding: 2rem 1rem;
  background-color: rgba(0, 0, 0, .6);
  color: var(--text-light);
  text-align: center;
  font-size: .9rem;
  border-style: solid;
  border-color: transparent;
  border-width: 1px 0 6px;
  border-image: url(/assets/textures/ancient-gold-3-h.jpg) 1 round;
}

.site-footer a {
  color: var(--ancient-gold);
  text-decoration: none;
}

.site-footer a:hover {
  text-decoration: underline;
}

/* --- Banners & Titles --- */
.banner-container {
  position: relative;
}

.banner-parallax,
.banner-parallax-secondary {
  position: relative;
  width: 100%;
  height: 300px;
  background-size: cover;
  background-position: 50%;
  background-repeat: no-repeat;
  background-attachment: fixed;
  -webkit-mask-image: url(/assets/images/banners/banner-stain-full.svg);
  mask-image: url(/assets/images/banners/banner-stain-full.svg);
  mask-position: bottom center;
  -webkit-mask-position: bottom center;
  mask-size: auto 300px;
  -webkit-mask-size: contain;
}

.banner-parallax {
  height: 650px;
  margin-top: 70px;
  mask-size: auto 650px;
}

.banner-mask {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  inset: 0;
  top: 50%;
  translate: 0 -50%;
  padding: 1rem;
  color: #fff;
  text-align: center;
}

.banner-mask:before {
  content: "";
  position: absolute;
  top: 50%;
  left: 0;
  transform: translateY(-50%);
  width: 100%;
  height: 350px;
  background-color: rgba(13, 14, 12, .9);
  background-image: url(https://www.transparenttextures.com/patterns/random-grey-variations.png);
  border-style: solid;
  border-color: transparent;
  border-width: 2px 0;
  border-image: url(/assets/textures/ancient-gold-3-h.jpg) 1 round;
  z-index: 0;
  pointer-events: none;
}

.title {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  font-family: var(--font-antique);
}

.title .title-container,
.title-container {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: clamp(150px, calc(10vh + 35vw), 700px);
  margin: 0 auto .1rem;
  font-size: 4rem;
  line-height: 1;
  gap: 1.5rem;
  scroll-margin-top: 80px;
  z-index: 2;
}

.title .title-container {
  letter-spacing: .3rem;
}

.title-container.page-title {
  width: clamp(150px, calc(10vh + 40vw), 900px);
  font-size: 5rem;
  letter-spacing: normal;
  gap: 4rem;
}

.title .title-container-sidebar {
  display: inline-flex;
  justify-content: left;
  font-size: 2.8rem;
  line-height: 1;
  letter-spacing: .05em;
  gap: 1.5rem;
  position: relative;
  scroll-margin-top: 80px;
}

.title .title-container h1 {
  background: linear-gradient(to right, rgba(var(--deep-charcoal-rgb), .2), rgba(var(--brown-charcoal-rgb), .2)), url(/assets/textures/antique-gold-1.jpg);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  font-family: var(--font-title);
  font-size: inherit;
  font-weight: 100;
  margin: 0;
  padding: 10px 0 1em;
}

.title .title-container-sidebar h1 {
  background: linear-gradient(to right, var(--burnt-copper), var(--ancient-gold));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  font-weight: 100;
  padding: 10px 0;
}

.title-container img {
  width: 100%;
  max-width: 800px;
  height: auto;
  margin-bottom: 1rem;
  filter: drop-shadow(0 0 8px rgba(0, 0, 0, 1)) drop-shadow(0 0 16px rgba(0, 0, 0, .8));
}

.subtitle {
  color: var(--pale-beige);
  font-family: var(--font-antique);
  font-size: 1.3rem;
  font-variant: none;
  letter-spacing: .03em;
  text-transform: none;
  margin: .5rem 0;
  filter: drop-shadow(0 0 5px black);
}

@media (max-width: 767px) {

  .banner-parallax,
  .banner-parallax-secondary {
    background-attachment: scroll;
    background-position: 0;
  }

  .banner-parallax {
    height: 750px;
    margin-top: 0;
    mask-size: auto 750px;
  }

  .banner-parallax-secondary {
    height: 150px;
    mask-size: auto 150px;
  }

  .banner-mask {
    background-color: transparent;
    height: 100vh;
    justify-content: end;
    z-index: 7;
  }

  .banner-mask:before {
    display: none;
  }

  .site-title-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: absolute;
    bottom: 10vh;
    padding: 2vh 2vw;
    gap: 1vh;
    text-align: center;
  }

  .site-title-wrapper:before {
    content: "";
    position: absolute;
    height: 320px;
    left: 0;
    width: 100%;
    margin-bottom: .2rem;
    background: linear-gradient(180deg, transparent 0, rgba(0, 0, 0, .8) 30%, rgba(0, 0, 0, .8) 70%, transparent);
    z-index: 0;
    pointer-events: none;
  }

  .title .title-container {
    flex-direction: column;
    width: 95vw;
  }

  .title .title-container h1 {
    font-size: clamp(2.5rem, 20vw, 4rem);
    width: 360px;
  }

  .title-container img {
    max-width: 750px !important;
    width: 85vw !important;
  }
}

@media (max-width: 600px) {
  .title .title-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0;
    gap: .1rem;
    font-size: clamp(1rem, 10vw, 3rem);
  }

  .title-icon {
    font-size: 3rem;
    margin: -1em 0 0;
    transform: rotate(0deg);
  }

  .title-icon,
  .title-icon.flipped,
  .title-icon.mirrored {
    display: none;
  }

  .title-icon.top {
    order: -1;
  }

  .title-icon.bottom {
    order: 1;
  }
}


/* --- Logo --- */
.logo-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-100%, -50%);
  height: clamp(150px, calc(10vh + 30vw), 550px);
  margin-bottom: 3rem;
  filter: drop-shadow(0 0 8px rgba(0, 0, 0, .5)) drop-shadow(0 0 16px rgba(0, 0, 0, .2));
  z-index: 8;
}

.logo-container img.logo {
  height: 110%;
  object-fit: cover;
  user-select: none;
  pointer-events: none;
}

.logo-container-mobile {
  display: none;
}

@media (max-width: 767px) {
  .logo-container {
    display: none;
  }

  .logo-container-mobile {
    display: block;
    position: absolute;
    top: 10vh;
    left: 50%;
    transform: translate(-50%);
    height: clamp(150px, calc(10vh + 30vw), 550px);
    margin: -10vh 0 2rem;
    justify-content: center;
    filter: drop-shadow(0 0 8px rgba(0, 0, 0, .5)) drop-shadow(0 0 16px rgba(0, 0, 0, .2));
    z-index: 9;
  }

  .logo-container-mobile img.logo {
    height: 110%;
    object-fit: cover;
  }
}


/* --- Painting / Framed Images --- */
.banner-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
}

.painting-frame {
  display: inline-block;
  padding: 3px;
  background: linear-gradient(to bottom, rgba(var(--deep-charcoal-rgb), .2), rgba(var(--brown-charcoal-rgb), .2)), url(/assets/textures/antique-gold-1.jpg);
  border-radius: 1rem;
  filter: drop-shadow(2px 0 5px black);
}

.banner-parallax-painting {
  width: clamp(200px, 60vw, 1000px);
  height: 500px;
  background-size: cover;
  background-position: 50%;
  background-repeat: no-repeat;
  border-radius: .9rem;
  will-change: background-position;
}

.banner-parallax-painting:before {
  content: "—" attr(data-title);
  position: absolute;
  bottom: 1rem;
  right: 2rem;
  display: flex;
  align-items: center;
  height: 2rem;
  padding: 1rem 1.5rem;
  background: rgba(var(--background-dark-1-rgb), .3);
  border: 1px solid var(--deep-charcoal);
  color: var(--pale-beige);
  font-family: IM Fell English;
  font-size: 1rem;
  width: auto;
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  filter: drop-shadow(0 0 3px black);
}

/* --- Carousel --- */
.carousel-wrapper {
  max-width: 750px;
  padding: 3px;
  border-style: solid;
  border-width: 0 3px;
  border-color: var(--ancient-gold);
  border-radius: 15px;
}

.carousel-wrapper#home-page {
  max-width: 1000px;
  position: relative;
}

.carousel-track {
  display: flex;
  gap: 2rem;
  padding: 1rem 2rem;
  overflow-x: auto;
  scroll-behavior: auto;
  scrollbar-width: none;
  cursor: var(--cursor-grab);
}

.carousel-track.active {
  cursor: var(--cursor-grabbing);
}

.carousel-track::-webkit-scrollbar {
  display: none;
}

.carousel-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: #000;
  border: none;
  border-radius: .5rem;
  padding: .6rem;
  color: var(--ancient-gold);
  font-size: 3rem;
  cursor: var(--cursor-pointer);
  z-index: 2;
  opacity: 0;
  pointer-events: none;
  transition: opacity .3s ease;
}

.carousel-arrow:hover {
  color: var(--bright-gold);
}

.carousel-arrow.left {
  left: -4rem;
}

.carousel-arrow.right {
  right: -4rem;
}

.full-width:hover .carousel-arrow {
  opacity: 1;
  pointer-events: auto;
}

.carousel-arrow.hidden {
  opacity: 0 !important;
  pointer-events: none !important;
}

@media (max-width: 767px) {
  .carousel-wrapper {
    max-width: 95vw;
    box-sizing: content-box;
  }
}

/* --- Feature Cards (used in Carousel) --- */
.feature-card-wrapper {
  display: inline-block;
  padding: 3px;
  background: linear-gradient(to right, rgba(var(--deep-charcoal-rgb), .2), rgba(var(--brown-charcoal-rgb), .2)), url(/assets/textures/antique-gold-1.jpg);
  border-radius: .5rem;
  filter: drop-shadow(2px 0 5px black);
}

.feature-card {
  display: flex;
  flex: 0 0 250px;
  width: 250px;
  height: 350px;
  position: relative;
  justify-content: flex-end;
  background-size: cover;
  background-position: 50%;
  border-radius: .5rem;
  overflow: hidden;
  user-select: none;
  -webkit-user-drag: none;
  -webkit-user-select: none;
  transition: transform .3s ease;
}

.feature-card.small {
  width: 250px;
  height: 300px;
  background-position: top;
}

.feature-card:hover .card-content {
  background-color: rgba(0, 0, 0, .8);
}

.feature-card .card-description.short,
.feature-card .carousel-icon,
.feature-card h3,
.feature-card h4 {
  opacity: 0;
  transition: all .3s ease;
}

.feature-card:hover .card-description.short,
.feature-card:hover .carousel-icon,
.feature-card:hover h3,
.feature-card:hover h4 {
  opacity: 1;
  transition: all .3s ease;
}

.card-content {
  box-sizing: border-box;
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  color: #fff;
  background-image: linear-gradient(0deg, rgba(0, 0, 0, .9) 30%, transparent);
  transition: background .4s ease-in-out;
}

.card-content h3,
.card-content h4 {
  font-family: var(--font-antique);
  text-transform: uppercase;
}

.card-content h3 {
  font-size: 1.4rem;
  color: var(--ancient-gold);
  margin: 1.5rem 1rem 0;
  border: none;
  cursor: var(--cursor-grab);
  text-align: center;
}

.card-content h4 {
  font-size: .8rem;
  color: var(--bright-gold);
  margin-top: 0;
}

.card-description.short,
.card-description.full {
  font-size: .9rem;
  text-align: center;
  cursor: var(--cursor-grab);
}

.card-description.short {
  padding: 0 1rem;
}

.card-description.full {
  box-sizing: border-box;
  position: relative;
  min-height: 175px;
  padding: 1.5rem 1.75rem;
  opacity: 0;
  visibility: hidden;
  transition: opacity .3s ease, visibility .3s ease;
  z-index: 1;
}

.feature-card:hover .card-description.full {
  opacity: 1;
  visibility: visible;
  cursor: var(--cursor-grab);
}

p.card-description {
  pointer-events: none;
}

/* Specific Home Page Card Styles */
#home-page .card-content,
#home-page .card-description,
#home-page .carousel-icon,
#home-page h3 {
  opacity: 1;
  text-align: center;
}

#home-page .card-content {
  background: rgba(0, 0, 0, .8);
}

#home-page h3:after {
  background: none;
}

#home-page .carousel-icon {
  border-radius: 0;
}

.carousel-icon {
  display: flex;
  justify-content: center;
  width: 50px;
  height: 50px;
  margin: .5rem 0 2rem;
  border-radius: 20px;
  gap: 1rem;
  pointer-events: none;
}

.carousel-track {
  padding: 5px 0;
}

.card-content {
  align-items: center;
  justify-content: flex-start;
  padding: 0 10px;
  background-image: none;
  background-color: transparent;
}

.card-description.short {
  margin-top: 0;
}


/* --- Menu Grids --- */
.menu-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
  background: transparent;
}

.menu-cell {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  min-height: 200px;
  padding: 0 1rem;
  background-color: var(--background-dark-2);
  border-radius: .5rem;
  color: #fff;
  text-decoration: none;
  position: relative;
  cursor: var(--cursor-pointer);
  user-select: none;
  box-sizing: content-box;
  filter: drop-shadow(0 0 5px rgba(0, 0, 0, .2));
  transition: background-color .3s ease, border-color .3s ease;
}

.menu-cell:hover,
.menu-cell:focus-visible {
  background-color: var(--background-dark-3);
  outline: none;
}

.menu-cell:before,
.menu-cell:after {
  content: "";
  display: block;
  position: relative;
  width: calc(100% + 2rem);
  height: 5px;
  background: linear-gradient(to bottom, rgba(var(--deep-charcoal-rgb), .2), rgba(var(--brown-charcoal-rgb), .2)), url(/assets/textures/antique-gold-1.jpg);
}

.menu-cell:before {
  top: 0;
  border-radius: 10px 10px 0 0;
}

.menu-cell:after {
  bottom: 0;
  border-radius: 0 0 10px 10px;
}

.menu-cell .symbol {
  position: absolute;
  top: 1.5rem;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 80px;
  opacity: .25;
  transition: opacity .3s ease-in-out, transform .3s ease-in-out;
  pointer-events: none;
}

.menu-cell:hover .symbol,
.menu-cell:focus-visible .symbol {
  opacity: 1;
  transform: translateX(-50%) scale(1.1);
}

.menu-cell .text-content {
  z-index: 1;
  width: 100%;
  margin-bottom: 1rem;
  text-align: center;
}

.menu-cell h4 {
  font-size: 1.2rem;
  font-weight: 700;
  text-transform: uppercase;
  margin: .5rem 0;
  pointer-events: none;
}

.menu-cell p {
  font-size: .875rem;
  margin: 0;
  opacity: .85;
  pointer-events: none;
}

/* Variation of Menu Grid */
.menu-2-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1rem;
  background: transparent;
}

.menu-2-cell {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  min-height: 200px;
  padding: .5rem 1rem 0;
  border-radius: .5rem;
  color: #fff;
  text-decoration: none;
  position: relative;
  cursor: var(--cursor-pointer);
  user-select: none;
  filter: drop-shadow(0 0 5px rgba(0, 0, 0, .2));
  transition: background-color .3s ease, border-color .3s ease;
}

.menu-2-cell:hover,
.menu-2-cell:focus-visible {
  outline: none;
}

.menu-2-cell .symbol {
  position: absolute;
  top: 1.5rem;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 80px;
  opacity: .25;
  transition: opacity .3s ease-in-out, transform .3s ease-in-out;
  user-select: none;
  pointer-events: none;
}

.menu-2-cell:hover .symbol,
.menu-2-cell:focus-visible .symbol {
  opacity: 1;
  transform: translateX(-50%) scale(1.1);
}

.menu-2-cell .text-content {
  z-index: 1;
  width: 100%;
  text-align: center;
}

.menu-2-cell h4 {
  font-size: 1.2rem;
  font-weight: 700;
  text-transform: uppercase;
  margin: 2rem 0 .25rem;
  user-select: text;
}

.menu-2-cell p {
  font-size: .875rem;
  margin: 0;
  opacity: .85;
  user-select: none;
}

.menu-2-cell:hover p.alchemy-symbol {
  filter: drop-shadow(0 0 20px rgba(var(--ancient-gold-rgb), .5));
}

@media (max-width: 767px) {
  .menu-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .menu-cell {
    min-height: 240px;
  }
}


/* --- Collapsibles / Accordions --- */
.collapsible-item {
  width: 100%;
  margin-top: 25px;
  background-color: #484848;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, .2);
  box-sizing: border-box;
  overflow: hidden;
}

.collapsible-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 15px 20px;
  color: var(--off-white);
  font-family: var(--font-main);
  font-size: 1.2em;
  font-weight: 700;
  cursor: var(--cursor-pointer);
  transition: background-color .2s ease-in-out;
}

.collapsible-header:hover {
  background-color: #555;
}

.collapsible-icon {
  width: 24px;
  height: 24px;
  margin-left: auto;
  transition: transform .3s ease-in-out;
}

.collapsible-icon svg path {
  fill: var(--off-white);
}

.collapsible-item.expanded .collapsible-icon {
  transform: rotate(90deg);
}

.collapsible-content {
  height: 0;
  overflow: hidden;
  padding: 0 20px;
  color: var(--off-white);
  font-family: var(--font-main);
  font-size: .9rem;
  box-sizing: border-box;
  transition: height .5s ease-in-out, padding .5s ease-in-out;
}

.collapsible-content ul {
  list-style-type: disc;
  margin-top: 0;
  margin-bottom: 0;
  margin-left: 20px;
  padding-left: 0;
}

.collapsible-content li {
  color: var(--off-white);
  font-family: var(--font-main);
  line-height: 1.6;
  margin-bottom: 10px;
}

.collapsible-content li b {
  font-weight: 700;
}

/* Sidebar Collapsible Variation */
.collapsible-item-sb {
  width: 100%;
  background-color: #484848;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, .2);
  box-sizing: border-box;
  overflow: hidden;
}

.collapsible-header-sb {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: transparent;
  cursor: var(--cursor-pointer);
  position: relative;
  overflow: visible;
  z-index: 1;
}

.collapsible-header-sb:hover {
  background: transparent !important;
}

.collapsible-header-sb:before {
  content: "";
  position: absolute;
  top: -8px;
  bottom: -8px;
  left: -8px;
  right: -8px;
  background-color: hsla(0, 0%, 100%, .05);
  border-radius: 8px;
  opacity: 0;
  transition: background .3s ease;
  z-index: 0;
}

.collapsible-header-sb:hover:before {
  opacity: 1;
}

h3.sidebar-section {
  pointer-events: none;
}

.collapsible-icon-sb {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  margin-left: 10px;
  font-size: 1.5rem;
  transition: transform .3s ease-in-out;
}

.collapsible-icon-sb svg path {
  fill: var(--off-white);
}

.collapsible-item-sb.expanded .collapsible-icon,
.collapsible-item-sb.expanded .collapsible-icon-sb {
  transform: rotate(90deg);
}

.collapsible-content-sb {
  height: 0;
  overflow: hidden;
  margin-top: 1em;
  padding: 0 20px;
  color: var(--off-white);
  font-family: var(--font-main);
  font-size: .9rem;
  box-sizing: border-box;
  transition: height .5s ease-in-out, padding .5s ease-in-out;
}

.collapsible-content-sb ul {
  list-style-type: none;
}

.collapsible-content-sb li {
  color: var(--off-white);
  font-family: var(--font-main);
  line-height: 1.6;
  margin-bottom: 10px;
}

.collapsible-content-sb li:before {
  content: "◆";
  color: var(--ancient-gold, #d4b55a);
  left: -1.5em;
  top: .5em;
}

.collapsible-content-sb li b {
  font-weight: 700;
}


/* --- Tables --- */
table {
  width: 100%;
  margin: 1.5rem 0;
  border-collapse: collapse;
  background-color: rgba(var(--burnt-copper-rgb), .06);
  border: 1px solid rgba(var(--ancient-gold-rgb), .15);
  border-radius: 6px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, .25);
  overflow: hidden;
  font-family: var(--font-main);
  font-size: .85rem;
}

table,
thead th {
  color: var(--off-white);
}

thead th {
  padding: .75rem 1rem;
  background-color: rgba(var(--burnt-copper-rgb), .2);
  border-bottom: 1px solid hsla(0, 0%, 100%, .05);
  font-size: .8rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: .05em;
}

thead th:first-child {
  border-top-left-radius: 6px;
}

thead th:last-child {
  border-top-right-radius: 6px;
}

td {
  padding: .75rem 1rem;
  border-bottom: 1px solid hsla(0, 0%, 100%, .04);
  vertical-align: top;
}

tbody tr:nth-child(2n) {
  background-color: hsla(0, 0%, 100%, .025);
}

tbody tr:hover {
  background-color: rgba(var(--ancient-gold-rgb), .08);
}

td:first-child {
  color: var(--ancient-gold);
  font-weight: 600;
}

td:nth-child(n+2),
th:nth-child(n+2) {
  text-align: center;
}

@media (max-width: 768px) {

  td,
  th {
    padding: 8px 10px;
    font-size: .9em;
  }
}

/* --- Blockquotes --- */
blockquote {
  margin: 1.5em 0;
  padding: .5em 1.5em;
  background-color: var(--dark-paper, #3a362f);
  background-image: var(--texture-concrete);
  border-radius: 0 1rem 1rem 0;
  color: var(--off-white, #f0f0f0);
  font-size: .9rem;
  position: relative;
}

blockquote:not(.clean):before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 6px;
  height: 100%;
  background: linear-gradient(to right, rgba(var(--burnt-copper-rgb), .2), rgba(var(--ancient-gold-rgb), .2)), url(/assets/textures/antique-gold-1.jpg);
}

blockquote .footer {
  text-align: right;
  margin-top: .5em;
  padding-right: 4rem;
  font-family: var(--font-calligraphy);
  font-size: 2em;
  font-style: italic;
  line-height: 1;
  color: var(--text-muted);
  z-index: 2;
}

blockquote.clean {
  background: none;
  border: none;
  margin: auto;
  max-width: 700px;
  font-family: var(--font-main);
  font-style: italic;
  font-weight: 300;
}

blockquote.clean p {
  font-size: 1rem;
}

.blockquote-clean-author {
  color: var(--pale-beige);
  font-size: 1.1rem;
  font-size: 1.8rem;
  text-align: right;
}

.blockquote-clean-author.var-1 {
  font-family: var(--font-calligraphy-1);
  font-size: 1.8rem;
}

.blockquote-clean-author.var-2 {
  font-family: var(--font-calligraphy-2);
  font-size: 1.8rem;
}

.blockquote-clean-author.var-3 {
  font-family: var(--font-calligraphy-3);
  font-size: 1.8rem;
}

p.blockquote-attribution {
  text-align: right;
  padding-right: 4rem;
  color: var(--text-muted);
  font-size: .7rem;
  margin-top: -1.2rem;
}

p.blockquote-attribution.clean {
  padding-right: 0;
}

@media (max-width: 767px) {
  blockquote.clean p {
    font-size: .9rem;
  }
}

/* --- Infobox --- */
.infobox {
  max-width: 400px;
  margin: 0 auto;
  padding: 10px;
  background: var(--dark-parchment, #2c2016);
  border: 1px solid rgba(var(--ancient-gold-rgb), .3);
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, .3);
  color: var(--off-white, #f4f1ec);
  font-family: var(--font-main, "EB Garamond", serif);
  overflow: hidden;
  box-sizing: border-box;
  width: 100%;
}

.infobox-image {
  display: block;
  width: 100%;
  height: auto;
  padding: 4px;
  background-color: var(--parchment, #f8f1e0);
  border: 2px solid var(--ancient-gold, #d6b879);
  border-radius: 4px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, .2);
  margin-bottom: .8rem;
  object-fit: cover;
  filter: sepia(.15) contrast(1.1);
  box-sizing: border-box;
}

.infobox-section {
  padding: 5px !important;
  background: hsla(0, 0%, 100%, .05);
  color: var(--ancient-gold, #d6b879);
  font-weight: 600;
  cursor: var(--cursor-pointer);
  position: relative;
}

details[open]>.infobox-section:after {
  transform: rotate(90deg);
}

.infobox details {
  margin-bottom: 8px;
  padding: 0;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

.infobox details:last-of-type {
  margin-bottom: 0;
}

.infobox-table {
  width: 100%;
  table-layout: fixed;
  border-collapse: collapse;
  border-radius: 0;
  margin: 6px 0 0;
  font-size: .9em;
  word-wrap: break-word;
  overflow-wrap: break-word;
  cursor: default;
}

.infobox-table th,
.infobox-table td {
  padding: 6px 10px;
  vertical-align: top;
  font-size: .85em;
  word-wrap: break-word;
  white-space: normal;
}

.infobox-table th {
  width: 40%;
  text-align: left;
  color: var(--ancient-gold, #d6b879);
  font-weight: 600;
}

.infobox-table td {
  color: var(--off-white, #f4f1ec);
  font-weight: 400;
}

.infobox-table tr:not(:last-child) {
  border-bottom: 1px solid hsla(0, 0%, 100%, .1);
}

.infobox-collapse-button {
  display: block;
  margin: 15px auto 2px;
  padding: 6px 30px;
  background: var(--brown-charcoal);
  border: 1px solid var(--ancient-gold);
  border-radius: 6px;
  color: var(--ancient-gold);
  font-family: var(--font-main);
  cursor: var(--cursor-pointer);
}

.infobox-collapse-button:hover {
  background: var(--ancient-gold);
  color: var(--warm-stone);
}

details[open] .infobox-table {
  animation: fadeIn .3s ease;
}

@media (max-width: 400px) {
  .infobox {
    width: 100%;
  }
}

/* --- Tags & Tooltips --- */
.tooltip {
  position: relative;
  display: inline-block;
  border-bottom: 1px dotted #a0a0a0;
  cursor: var(--cursor-help);
}

.tag {
  display: inline-block;
  vertical-align: middle;
  padding: 1px 6px 1px 1px;
  border: 1px solid hsla(0, 0%, 100%, .1);
  border-radius: 10px 5px 5px 10px;
  font-size: .65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: .05em;
  text-decoration: none;
}

.tag:before {
  content: "";
  display: inline-block;
  vertical-align: middle;
  width: 18px;
  height: 18px;
  margin-right: 4px;
  background-image: var(--tag-icon);
  background-size: contain;
  background-position: 50%;
  background-repeat: no-repeat;
}

.tag:hover {
  color: var(--ancient-gold, #d4b55a);
  cursor: var(--cursor-help);
}

.rule-tag {
  color: var(--off-white);
  text-transform: uppercase;
  display: inline-block;
  vertical-align: middle;
  margin-left: .5rem;
  padding: 2px 6px;
  background-color: hsla(0, 0%, 100%, .08);
  border: 1px solid hsla(0, 0%, 100%, .1);
  border-radius: 3px;
  font-size: .65rem;
  font-weight: 600;
  letter-spacing: .05em;
}

.rule-tag.tooltip {
  margin-left: 8px;
  background-color: #2e2e2e;
  border: 1px solid var(--bright-gold);
  border-radius: 4px;
  color: var(--bright-gold);
  font-size: .7rem;
  font-weight: 500;
  letter-spacing: .03em;
  text-transform: uppercase;
  cursor: var(--cursor-help);
  position: relative;
  transition: background .2s, color .2s;
}

.rule-tag.tooltip:hover {
  background-color: var(--bright-gold);
  color: #1c1c1c;
}

.rule-tag.optional {
  background-color: rgba(var(--ancient-gold-rgb), .15);
  color: var(--ancient-gold);
}

.rule-tag.variant {
  background-color: rgba(var(--burnt-copper-rgb), .15);
  color: var(--burnt-copper);
}

.rule-tag.experimental {
  background-color: rgba(255, 80, 80, .15);
  border-color: rgba(255, 80, 80, .3);
  color: #ff8080;
}

/* --- Rule Switch & Options --- */
.toggle-bar {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 1.2rem;
}

.rule-switch {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-family: var(--font-main);
  font-size: .9rem;
  text-transform: uppercase;
  letter-spacing: .02em;
  cursor: var(--cursor-pointer);
}

.rule-switch input {
  display: none;
}

.rule-switch .slider {
  position: relative;
  width: 36px;
  height: 20px;
  background-color: rgba(var(--burnt-copper-rgb), .3);
  border-radius: 10px;
  transition: background-color .3s ease;
}

.rule-switch .slider:after {
  content: "";
  position: absolute;
  top: 2px;
  left: 2px;
  width: 16px;
  height: 16px;
  background-color: var(--off-white);
  border-radius: 50%;
  transition: transform .3s ease;
}

.rule-switch input:checked+.slider {
  background-color: var(--ancient-gold);
}

.rule-switch input:checked+.slider:after {
  transform: translateX(16px);
}

.rule-switch .label {
  color: var(--off-white);
  text-transform: uppercase;
}

.rule-options-box {
  margin: 1rem 0 2rem;
  padding: 1rem 1.5rem;
  background-color: #2d2d2d;
  border: 1px solid #444;
  border-radius: 6px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, .4);
}

.rule-options-label {
  margin-bottom: 1rem;
  color: #aaa;
  font-size: .85rem;
  text-transform: uppercase;
  letter-spacing: .5px;
}

/* --- Sidebar --- */
.sidebar-wrapper {
  display: flex;
  flex-direction: column;
  gap: 2rem;
  align-self: flex-start;
  max-width: 300px;
  padding: 1rem;
  margin: 0 auto;
}

.sidebar-block {
  padding: 1rem;
  background-color: hsla(0, 0%, 100%, .03);
  border: 1px solid hsla(0, 0%, 100%, .05);
  border-radius: 8px;
}

.sidebar-block h3 {
  width: 100%;
  margin: 0 0 .5rem;
  font-family: var(--font-main);
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: .04em;
  color: var(--ancient-gold, #d4b55a);
}

.sidebar-link {
  display: block;
  margin: .35rem 0;
  color: var(--off-white, #eee);
  font-size: .85rem;
  text-decoration: underline;
}

@media screen and (max-width: 600px) {
  .sidebar {
    width: 100%;
    max-width: 100%;
    padding: 0;
    padding: 20px 0;
    order: 1;
  }
}

/* --- Archives Carousel --- */
.archives-carousel-fade {
  position: relative;
  min-height: 120px;
}

.archive-item {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  opacity: 0;
  visibility: hidden;
  transition: opacity .6s ease-in-out;
  z-index: 0;
}

.archive-item.show {
  opacity: 1;
  visibility: visible;
  z-index: 1;
}

.archive-item:focus {
  outline: none;
  scroll-margin: 0 !important;
}

.archive-author {
  margin-top: .4rem;
  color: #aaa;
  font-size: .7rem;
  font-style: normal;
  text-align: right;
}

/* --- Glossary --- */
.glossary-input {
  box-sizing: border-box;
  width: 100%;
  margin-bottom: .6rem;
  padding: .4rem .6rem;
  background: var(--background-grey-2, #2c2c2c);
  border: 1px solid var(--brown-charcoal, #3d2e23);
  border-radius: 4px;
  color: var(--off-white);
  font-size: .85rem;
}

.glossary-result {
  color: #ddd;
  font-size: .8rem;
  line-height: 1.4;
}

.glossary-result a {
  color: var(--bright-gold);
  text-decoration: underline;
}

/* --- Version Box --- */
.version-box {
  max-width: 480px;
  margin: 2rem auto 0;
  padding: .75rem 1.2rem;
  background-color: hsla(0, 0%, 100%, .03);
  border: 1px solid var(--brown-charcoal, #3d2e23);
  border-radius: 6px;
  color: var(--off-white, #efefef);
  font-family: var(--font-main, serif);
  font-size: .85rem;
  text-align: center;
}

/* --- Misc Decorative --- */
.dice-symbol,
.dice-symbol-big {
  display: inline;
  align-items: center;
  vertical-align: middle;
  gap: .4em;
}

.dice-symbol {
  height: 1.5em;
}

.dice-symbol-big {
  height: 2.5em;
}

.signature {
  font-family: var(--font-calligraphy);
  font-size: 2rem;
  font-weight: 100;
  line-height: 1;
}

.timeline {
  position: relative;
  padding-left: 40px;
  flex-grow: 1;
}

.timeline:before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: 12px;
  width: 4px;
  background-color: #3a3a3a;
}

@media (max-width: 768px) {
  .timeline {
    padding-left: 20px;
  }

  .timeline:before {
    left: 0;
  }

  .aptitude-grid-container {
    grid-template-columns: 1fr;
  }

  .aptitude-card .icon {
    margin: 15px auto;
  }
}


/* ==========================================================================
   7. PAGE-SPECIFIC & COMPLEX LAYOUTS
   ========================================================================== */

/* --- Home Page Specifics --- */
body#home-page {
  background-image: linear-gradient(to bottom, rgba(var(--background-site-rgb), 1) 0, rgba(var(--background-site-rgb), 1) 200px, rgba(var(--background-site-rgb), 0) 400px), linear-gradient(to top, rgba(var(--background-site-rgb), 1) 0, rgba(var(--background-site-rgb), .97) 200px), url(/assets/images/webp/decorations/full-new-world.webp);
  background-position: 50%;
  background-attachment: fixed;
}

/* --- Twin Coil System Section --- */
#twin-coil-system .narrative-table {
  width: 100%;
  border-collapse: collapse;
}

#twin-coil-system .narrative-table th,
#twin-coil-system .narrative-table td {
  padding: .75rem 1rem;
  border-bottom: 0 solid var(--ancient-gold, #d4b55a);
  vertical-align: middle;
}

#twin-coil-system .narrative-toggle {
  cursor: var(--cursor-pointer);
}

#twin-coil-system .toggle-icon {
  width: 2rem;
  color: var(--text-muted);
  font-size: 1.3rem;
  text-align: center;
  user-select: none;
  transition: transform .3s ease;
}

#twin-coil-system .narrative-toggle.expanded .toggle-icon {
  transform: rotate(90deg);
}

#twin-coil-system .narrative-row td {
  padding: 0;
  line-height: 0;
}

#twin-coil-system .narrative-row .narrative-content {
  max-height: 0;
  padding: 0 1.25rem;
  background: var(--background-dark-1);
  border-top: 1px solid var(--ancient-gold, #d4b55a);
  color: var(--off-white, #f0f0f0);
  font-family: var(--font-main, "Georgia", serif);
  font-size: .85rem;
  font-weight: 200;
  line-height: 1.6;
  opacity: 0;
  overflow: hidden;
  visibility: hidden;
  transition: max-height .4s ease, opacity .3s ease, visibility .3s ease;
}

#twin-coil-system .narrative-toggle.expanded+.narrative-row .narrative-content {
  max-height: 500px;
  padding: 1rem 1.25rem;
  opacity: 1;
  visibility: visible;
}

#twin-coil-system blockquote h3 {
  border-bottom: none;
  color: var(--ancient-gold, #d4b55a);
  font-size: 1.3em;
}

#twin-coil-system table td {
  vertical-align: middle;
}

#twin-coil-system table td img,
#twin-coil-system .dice-symbol img {
  height: 2em;
  vertical-align: middle;
}

/* 2x2 Grid for Twin Coil */
#twin-coil-system .grid-2x2-axes {
  display: grid;
  grid-template-columns: auto .15fr 1fr 1fr;
  grid-template-rows: auto .2fr 1fr 1fr;
  gap: 1px;
  margin-top: 1.5rem;
  background-color: none;
  font-size: .9rem;
  text-align: center;
}

#twin-coil-system .grid-cell,
#twin-coil-system .grid-label,
#twin-coil-system .axis-label {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: .5rem;
  background: var(--background-dark-2);
  color: var(--off-white);
  font-family: var(--font-main);
}

#twin-coil-system .axis-label {
  background: none;
  color: var(--off-white);
  font-weight: 700;
  writing-mode: vertical-rl;
}

#twin-coil-system .x-axis {
  grid-column: 3/span 3;
  grid-row: 1;
  background: rgba(var(--rust-red-rgb, rgb(138, 60, 48)), .2);
  border-radius: 10px 10px 0 0;
  writing-mode: horizontal-tb;
}

#twin-coil-system .y-axis {
  grid-column: 1;
  grid-row: 3/span 3;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(var(--faded-jade-rgb, rgb(138, 60, 48)), .2);
  border-radius: 0 10px 10px 0;
  color: var(--text-muted);
  font-weight: 700;
  transform: rotate(180deg);
  writing-mode: vertical-rl;
}

#twin-coil-system .grid-label {
  background: var(--deep-charcoal);
  font-weight: 700;
}

#twin-coil-system .grid-label.top-left {
  grid-column: 3;
  grid-row: 2;
  gap: .2rem;
}

#twin-coil-system .grid-label.top-right {
  grid-column: 4;
  grid-row: 2;
}

#twin-coil-system .grid-label.left-top {
  grid-column: 2;
  grid-row: 3;
}

#twin-coil-system .grid-label.left-bottom {
  grid-column: 2;
  grid-row: 4;
}

#twin-coil-system .grid-cell {
  flex-direction: column;
  font-size: .85rem;
  line-height: 1.2rem;
  text-align: center;
}

#twin-coil-system .grid-cell.top-left {
  grid-column: 3;
  grid-row: 3;
}

#twin-coil-system .grid-cell.top-right {
  grid-column: 4;
  grid-row: 3;
}

#twin-coil-system .grid-cell.bottom-left {
  grid-column: 3;
  grid-row: 4;
}

#twin-coil-system .grid-cell.bottom-right {
  grid-column: 4;
  grid-row: 4;
}

#twin-coil-system .grid-corner-image {
  grid-column: 1/span 2;
  grid-row: 1/span 2;
  display: flex;
  align-items: center;
  justify-content: right;
  width: 90%;
  height: 90%;
  padding: 0;
}

#twin-coil-system .grid-corner-image img {
  max-width: 90%;
  max-height: 90%;
  object-fit: contain;
}

/* Risk Badges for Twin Coil */
#twin-coil-system .risk-badges {
  display: flex;
  flex-direction: column;
  gap: 0;
  margin-top: 1rem;
}

#twin-coil-system .risk-badge {
  background: var(--background-dark-1, #1c1c1c);
  border: 1px solid var(--border-color, #444);
  border-left: .5rem solid var(--risk-color);
  border-radius: .5rem;
  padding: 0;
  overflow: hidden;
  transition: background .3s ease;
}

#twin-coil-system .risk-badge .collapsible-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  cursor: var(--cursor-pointer);
}

#twin-coil-system .risk-dice {
  min-width: 3rem;
  color: var(--ancient-gold, #d4b55a);
  font-size: 1.6rem;
  font-weight: 700;
  text-align: center;
}

#twin-coil-system .risk-info strong {
  display: block;
  font-size: 1rem;
  color: var(--off-white, #f0f0f0);
}

#twin-coil-system .risk-info span {
  font-size: .9rem;
  color: var(--text-muted, #aaa);
}

#twin-coil-system .risk-info p {
  margin: .3rem 0 0;
  color: var(--text-muted, #888);
  font-size: .8rem;
  line-height: 1.4;
}

#twin-coil-system .expanded .collapsible-content {
  max-height: 100vh;
  padding: 0 1rem 1rem;
  opacity: 1;
  visibility: visible;
}


/* --- Letter Layout --- */
.letter-wrapper {
  max-width: 700px;
  margin: 0 auto;
  padding: 2rem;
  line-height: 1.7;
  box-shadow: 0 0 8px rgba(0, 0, 0, .05);
}

.letter-content em {
  font-style: italic;
}

/* --- Feature Wrappers (Left/Right Image) --- */
.feature-wrapper-left,
.feature-wrapper-right {
  display: block;
  padding: 1rem;
  margin: 1rem 0;
  background: var(--background-dark-2);
  border-radius: 1rem;
}

.feature-desc {
  display: block;
  margin-bottom: 0;
}

.feature-desc h4 {
  display: flex;
  margin-top: 0;
}

.feature-wrapper-right h4 {
  justify-content: flex-end;
}

.feature-image {
  display: block;
  width: 130px;
  height: 130px;
  padding: 10px;
  background: var(--background-dark-1);
  border-radius: 10px;
}

.feature-symbol {
  display: block;
  padding: 3px;
  border-radius: .7rem;
}

.feature-wrapper-left .feature-symbol {
  float: left;
  margin-right: 15px;
  background: linear-gradient(to right, rgba(var(--deep-charcoal-rgb), .2), rgba(var(--brown-charcoal-rgb), .2)), url(/assets/textures/antique-gold-1.jpg);
}

.feature-wrapper-right .feature-symbol {
  float: right;
  margin-left: 15px;
  background: linear-gradient(to left, rgba(var(--deep-charcoal-rgb), .2), rgba(var(--brown-charcoal-rgb), .2)), url(/assets/textures/antique-gold-1.jpg);
}

@media (max-width: 767px) {
  .feature-image {
    width: 70px;
    height: 70px;
  }
}

/* --- Map --- */
.map {
  position: relative;
  left: 50%;
  transform: translateX(-50%);
  width: 100vw;
  max-width: 800px;
  padding: 1rem 2rem;
}

/* --- Alchemy Symbols & Overlays --- */
.alchemy-symbol {
  font-family: var(--font-alchemy-symbols);
  color: var(--ancient-gold, #d6b879);
  background: linear-gradient(to bottom, rgba(var(--deep-charcoal-rgb), .2), rgba(var(--brown-charcoal-rgb), .2)), url(/assets/textures/antique-gold-1.jpg);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  filter: drop-shadow(0 4px 10px black);
  user-select: none;
}

.alchemy-symbol.large {
  font-size: 7rem;
}

.alchemy-symbol.medium {
  font-size: 5rem;
}

.alchemy-symbol.small {
  font-size: 2rem;
}

p.alchemy-symbol.high {
  line-height: 1.9;
  margin-top: -1.5rem;
}

.overlay-symbol {
  position: absolute;
  top: 55%;
  transform: translate(-50%, -50%);
  width: 500px;
  height: 500px;
  background-position: 50%;
  background-repeat: no-repeat;
  background-size: contain;
  opacity: .03;
  z-index: -1;
  pointer-events: none;
  transition: opacity .4s ease-in-out;
}

.section-wrapper:hover .overlay-symbol {
  opacity: .06;
}

.overlay-symbol.l,
.overlay-symbol.r {
  left: 50%;
}

.overlay-symbol.var-1 {
  background-image: url(/assets/icons/webp/alchemy-symbols/alchemy-symbol-var-1.webp);
}

.overlay-symbol.var-2 {
  background-image: url(/assets/icons/webp/alchemy-symbols/alchemy-symbol-var-2.webp);
}

.overlay-symbol.var-3 {
  background-image: url(/assets/icons/webp/alchemy-symbols/alchemy-symbol-var-3.webp);
}

.overlay-symbol.var-4 {
  background-image: url(/assets/icons/webp/alchemy-symbols/alchemy-symbol-var-4.webp);
}

.overlay-symbol.var-5 {
  background-image: url(/assets/icons/webp/alchemy-symbols/alchemy-symbol-var-5.webp);
}

.overlay-symbol.var-7 {
  background-image: url(/assets/icons/webp/alchemy-symbols/alchemy-symbol-var-7.webp);
}

#letter-from-alonso:hover .overlay-symbol.var-4,
#tools-and-inspiration:hover .overlay-symbol.var-7,
#cultural-approach-and-ethics:hover .overlay-symbol.var-5 {
  opacity: .1;
}


/* ==========================================================================
   8. ANIMATIONS
   ========================================================================== */

@keyframes slideIn {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideOut {
  0% {
    opacity: 1;
    transform: translateY(0);
  }

  to {
    opacity: 0;
    transform: translateY(20px);
  }
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes fadeInBackground {
  0% {
    background-color: rgba(30, 30, 30, 0);
    backdrop-filter: blur(0);
  }

  to {
    background-color: rgba(30, 30, 30, .9);
    backdrop-filter: blur(8px);
  }
}

@keyframes fadeOutBackground {
  0% {
    background-color: rgba(30, 30, 30, .9);
    backdrop-filter: blur(8px);
  }

  to {
    background-color: rgba(30, 30, 30, 0);
    backdrop-filter: blur(0);
  }
}

@keyframes sidenavOpen {
  0% {
    transform: translate(0);
  }

  to {
    transform: translate(370px);
  }
}

@keyframes sidenavClose {
  0% {
    transform: translate(370px);
  }

  to {
    transform: translate(0);
  }
}